<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avatar ‚Äî –õ–∏—á–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
  <meta name="description" content="–í—Ç–æ—Ä–æ–π –º–æ–∑–≥ –∏ ERP –¥–ª—è –∂–∏–∑–Ω–∏. –ü—Ä–æ–µ–∫—Ç—ã, —Ç—Ä–µ–∫–∏–Ω–≥, GTD. Glava.family, WSDC points, Collect, Dancelot. Collect my day, Powered by AI.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #fafafa;
      --sidebar-bg: #f5f5f4;
      --card-bg: #ffffff;
      --text: #37352f;
      --text-muted: #6b6b6b;
      --accent: #2383e2;
      --accent-hover: #0d6ecd;
      --border: #e8e8e6;
      --locked: #9b9b97;
      --locked-bg: #f0f0ee;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'DM Sans', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    .app {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 260px;
      min-width: 260px;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--border);
      padding: 24px 12px;
    }
    .sidebar-logo {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 24px;
      padding-left: 12px;
    }
    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .nav-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text);
      text-decoration: none;
      font-size: 0.9375rem;
      transition: background 0.15s;
    }
    .nav-item:hover {
      background: var(--border);
    }
    .nav-item.active {
      background: var(--card-bg);
      box-shadow: 0 1px 2px rgba(0,0,0,0.06);
    }
    .nav-item.locked {
      color: var(--locked);
    }
    .nav-item .lock {
      opacity: 0.7;
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }

    /* Main */
    .main {
      flex: 1;
      padding: 48px 64px 80px;
      max-width: 900px;
    }
    .page-title {
      font-size: 2.5rem;
      font-weight: 600;
      margin: 0 0 8px;
      letter-spacing: -0.02em;
    }
    .page-meta {
      color: var(--text-muted);
      font-size: 0.875rem;
      margin-bottom: 32px;
    }

    /* Blocks */
    .block {
      margin-bottom: 16px;
    }
    .block h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 24px 0 12px;
    }
    .block h2:first-child { margin-top: 0; }
    .block p {
      margin: 0 0 12px;
      color: var(--text);
    }
    .block ul {
      margin: 0 0 16px;
      padding-left: 24px;
    }
    .block li {
      margin-bottom: 6px;
    }

    /* Callouts / Cards */
    .callout {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px 20px;
      margin: 12px 0;
    }
    .callout.locked {
      background: var(--locked-bg);
      border-color: #e5e5e3;
      position: relative;
    }
    .callout.locked::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.6) 0%, transparent 50%);
      border-radius: 8px;
      pointer-events: none;
    }
    .callout-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-weight: 500;
    }
    .callout-header .lock {
      width: 16px;
      height: 16px;
      opacity: 0.6;
    }
    .callout-desc {
      font-size: 0.9375rem;
      color: var(--text-muted);
      margin: 0;
    }

    /* Links */
    .link-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .link-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      text-decoration: none;
      color: var(--text);
      font-size: 0.9375rem;
      transition: border-color 0.15s, box-shadow 0.15s;
    }
    .link-item:hover {
      border-color: var(--accent);
      box-shadow: 0 2px 8px rgba(35,131,226,0.1);
    }
    .link-item svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      opacity: 0.7;
    }
    .link-item .label {
      flex: 1;
    }
    .link-item .arrow {
      opacity: 0.4;
      font-size: 0.75rem;
    }
    .link-item.external::after {
      content: '‚Üó';
      opacity: 0.5;
      font-size: 0.75rem;
    }
    .item-card {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 0.9375rem;
      margin-bottom: 8px;
    }
    .item-card .label { flex: 1; }
    .item-card .desc { font-size: 0.8125rem; color: var(--text-muted); margin-top: 2px; }

    /* Photo diary */
    .photo-board {
      margin-top: 32px;
    }
    .photo-board h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0 0 16px;
    }
    .photo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }
    .photo-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
      transition: box-shadow 0.2s;
    }
    .photo-card:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    }
    .photo-card img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      display: block;
    }
    .photo-card .caption {
      padding: 12px 14px;
      font-size: 0.875rem;
      color: var(--text);
      line-height: 1.4;
    }
    .photo-card .caption:empty { display: none; }
    .photo-card .date {
      padding: 0 14px 12px;
      font-size: 0.75rem;
      color: var(--text-muted);
      font-family: 'JetBrains Mono', monospace;
    }
    .photo-board-loading {
      color: var(--text-muted);
      font-size: 0.9375rem;
      padding: 24px 0;
    }
    .photo-board-error {
      color: #c53030;
      font-size: 0.9375rem;
      padding: 24px 0;
    }
    .photo-board-empty {
      color: var(--text-muted);
      font-size: 0.9375rem;
      padding: 24px 0;
    }
    .photo-board-hint {
      font-size: 0.8125rem;
      color: var(--text-muted);
      margin-top: 12px;
    }
    .photo-board-url-form {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }
    .photo-board-url-form input {
      flex: 1;
      min-width: 200px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.875rem;
    }
    .photo-board-url-form button {
      padding: 8px 16px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.875rem;
      cursor: pointer;
    }
    .photo-board-url-form button:hover { background: var(--accent-hover); }

    .link-item.locked-link { cursor: pointer; }
    .link-item.locked-link .lock { opacity: 0.8; }

    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; z-index: 1000;
    }
    .modal {
      background: var(--card-bg); border-radius: 12px; padding: 24px; max-width: 360px; width: 90%; box-shadow: 0 8px 32px rgba(0,0,0,0.15);
    }
    .modal h4 { margin: 0 0 16px; font-size: 1.125rem; }
    .modal input { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 6px; margin-bottom: 12px; font-size: 0.9375rem; box-sizing: border-box; }
    .modal input:focus { outline: none; border-color: var(--accent); }
    .modal button { width: 100%; padding: 10px; background: var(--accent); color: white; border: none; border-radius: 6px; font-size: 0.9375rem; cursor: pointer; }
    .modal button:hover { background: var(--accent-hover); }
    .modal .error { color: #c53030; font-size: 0.8125rem; margin-top: 8px; }

    /* Locked section overlay */
    .locked-content {
      filter: blur(4px);
      user-select: none;
      pointer-events: none;
      opacity: 0.7;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .app { flex-direction: column; }
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
        padding: 16px;
      }
      .sidebar-nav { flex-direction: row; flex-wrap: wrap; }
      .main { padding: 24px 20px 48px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="sidebar-logo">Avatar</div>
      <nav class="sidebar-nav" id="sidebar-nav"></nav>
    </aside>
    <main class="main" id="main-content">
      <article id="crawler-content" aria-hidden="true">
        <h1>Avatar ‚Äî –õ–∏—á–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
        <h2>Avatar</h2>
        <p>–í—Ç–æ—Ä–æ–π –º–æ–∑–≥ –∏ ERP –¥–ª—è –∂–∏–∑–Ω–∏. –ü—Ä–æ–µ–∫—Ç—ã, —Ç—Ä–µ–∫–∏–Ω–≥, GTD.</p>
        <p>–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±–∑–æ—Ä–∞ –∂–∏–∑–Ω–∏, –≥–¥–µ —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –ø—Ä–æ–µ–∫—Ç—ã, –º–µ–¥–∏–∞ –∏ –∫–ª—é—á–µ–≤—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏.</p>
        <p>–î–æ–º–µ–Ω—ã: —Ä–∞–±–æ—Ç–∞, —Ñ–∏–Ω–∞–Ω—Å—ã, –∑–¥–æ—Ä–æ–≤—å–µ, —Å–µ–º—å—è, —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ, —Å–ø–æ—Ä—Ç, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ.</p>
        <p>–° –ø–æ–º–æ—â—å—é AI –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ª—ë–≥–∫–∞—è ERP –∏ CMS, –ø–æ–º–æ–≥–∞—è –≤–∏–¥–µ—Ç—å –∫–∞—Ä—Ç–∏–Ω—É –∂–∏–∑–Ω–∏ —Ü–µ–ª–∏–∫–æ–º –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –µ—é –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.</p>
        <h2>–ü—Ä–æ–µ–∫—Ç—ã</h2>
        <ul>
          <li><strong>Glava.family</strong> ‚Äî –∏—Å—Ç–æ—Ä–∏–∏ –±–ª–∏–∑–∫–∏—Ö, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω—É –∫–Ω–∏–≥—É</li>
          <li><a href="https://nikitamorgos.github.io/IndigoSandbox/">Indigo Sandbox</a> ‚Äî –∫–µ–π—Å—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI-–ø—Ä–æ–µ–∫—Ç–æ–≤</li>
          <li><a href="https://nikitamorgos.github.io/wsdc-dashboard/">WSDC points</a> ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø–æ –ø–æ–π–Ω—Ç–∞–º WSDC</li>
          <li><strong>Collect</strong> ‚Äî Photo diary</li>
            <li><a href="https://t.me/Dancelot_bot">Dancelot</a> ‚Äî —Ç–∞–Ω—Ü—É–π—Ç–µ —Ö–æ—Ä–æ—à–æ, –ø–ª–æ—Ö–æ –Ω–µ —Ç–∞–Ω—Ü—É–π—Ç–µ</li>
        </ul>
        <h2>–ú–µ–¥–∏–∞</h2>
        <ul>
          <li><a href="https://t.me/+hF5RnN5ozz1hZWUy">Collect my day</a> ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ñ–æ—Ç–∫–∏ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –º–∏—Ä–∞</li>
          <li><a href="https://t.me/+4o59MZz8ARk0YTVi">Powered by AI</a> ‚Äî –∫–∞–∫ –≤–∑—Ä–æ—Å–ª—ã–π –≥—É–º–∞–Ω–∏—Ç–∞—Ä–∏–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–Ω–∂–µ–Ω–µ—Ä–æ–º, –∏—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–∞–Ω–Ω–∞—è AI —Å–æ —Å–ª–æ–≤ —á–µ–ª–æ–≤–µ–∫–∞</li>
          <li><strong>Born to be Novice</strong></li>
          <li><strong>Lev Bayonet</strong></li>
        </ul>
        <h2>–†–∞–∑–¥–µ–ª—ã –ø–æ–¥ –∑–∞–º–∫–æ–º</h2>
        <p>–ó–¥–æ—Ä–æ–≤—å–µ, –§–∏–Ω–∞–Ω—Å—ã, –°–µ–º—å—è</p>
      </article>
    </main>
    <div id="auth-modal" class="modal-overlay" style="display: none;">
      <div class="modal">
        <h4>–î–æ—Å—Ç—É–ø –∫ MarComTeam</h4>
        <input type="email" id="auth-email" placeholder="Email" autocomplete="email">
        <input type="password" id="auth-password" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="current-password">
        <button type="button" id="auth-submit">–í–æ–π—Ç–∏</button>
        <div id="auth-error" class="error" style="display: none;"></div>
      </div>
    </div>
  </div>

  <script>
    // URL API –¥–ª—è Photo diary (Collect). –û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º –∏–ª–∏ —É–∫–∞–∂–∏ —Å–≤–æ–π VPS, –Ω–∞–ø—Ä–∏–º–µ—Ä: https://your-vps.com:8080
    const COLLECT_API_URL = '';

    // –î–æ—Å—Ç—É–ø –∫ MarComTeam (email + –ø–∞—Ä–æ–ª—å). –ó–∞–¥–∞–π —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:
    const MARCOM_CREDENTIALS = { email: 'n.morgos@gmail.com', password: 'Nthvbyfk2020' };

    const LOCK_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>';
    const TG_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18 1.897-.962 6.502-1.359 8.627-.168.9-.5 1.201-.82 1.23-.697.064-1.226-.461-1.901-.903-1.056-.693-1.653-1.124-2.678-1.8-1.185-.781-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.139-5.062 3.345-.479.329-.913.489-1.302.481-.428-.009-1.252-.242-1.865-.44-.752-.244-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.831-2.529 6.998-3.015 3.333-1.386 4.025-1.627 4.476-1.635.099-.002.321.023.465.141.121.1.155.234.171.331.015.098.034.321.019.495z"/></svg>';

    const sections = [
      {
        id: 'overview',
        name: '–û–±–∑–æ—Ä',
        locked: false,
        content: `
          <h2>Avatar</h2>
          <p>–í—Ç–æ—Ä–æ–π –º–æ–∑–≥ –∏ ERP –¥–ª—è –∂–∏–∑–Ω–∏. –ü—Ä–æ–µ–∫—Ç—ã, —Ç—Ä–µ–∫–∏–Ω–≥, GTD.</p>
          <p>–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±–∑–æ—Ä–∞ –∂–∏–∑–Ω–∏, –≥–¥–µ —Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –ø—Ä–æ–µ–∫—Ç—ã, –º–µ–¥–∏–∞ –∏ –∫–ª—é—á–µ–≤—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏.</p>
          <p>–î–æ–º–µ–Ω—ã: —Ä–∞–±–æ—Ç–∞, —Ñ–∏–Ω–∞–Ω—Å—ã, –∑–¥–æ—Ä–æ–≤—å–µ, —Å–µ–º—å—è, —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ, —Å–ø–æ—Ä—Ç, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ.</p>
          <p>–° –ø–æ–º–æ—â—å—é AI –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ª—ë–≥–∫–∞—è ERP –∏ CMS, –ø–æ–º–æ–≥–∞—è –≤–∏–¥–µ—Ç—å –∫–∞—Ä—Ç–∏–Ω—É –∂–∏–∑–Ω–∏ —Ü–µ–ª–∏–∫–æ–º –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –µ—é –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.</p>
        `
      },
      {
        id: 'projects',
        name: '–ü—Ä–æ–µ–∫—Ç—ã',
        locked: false,
        content: `
          <div class="link-list">
            <div class="item-card">
              <span>üìñ</span>
              <div><strong>Glava.family</strong><div class="desc">–ò—Å—Ç–æ—Ä–∏–∏ –±–ª–∏–∑–∫–∏—Ö, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω—É –∫–Ω–∏–≥—É</div></div>
            </div>
            <a href="https://nikitamorgos.github.io/IndigoSandbox/" class="link-item" target="_blank" rel="noopener">
              <span>ü§ñ</span>
              <span class="label">Indigo Sandbox ‚Äî –ö–µ–π—Å—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI-–ø—Ä–æ–µ–∫—Ç–æ–≤</span>
              <span class="arrow">‚Üó</span>
            </a>
            <a href="https://nikitamorgos.github.io/wsdc-dashboard/" class="link-item" target="_blank" rel="noopener">
              <span>üìä</span>
              <span class="label">WSDC points ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø–æ –ø–æ–π–Ω—Ç–∞–º WSDC</span>
              <span class="arrow">‚Üó</span>
            </a>
            <div class="item-card">
              <span>üñº</span>
              <div><strong>Collect</strong><div class="desc">Photo diary</div></div>
            </div>
            <a href="https://t.me/Dancelot_bot" class="link-item" target="_blank" rel="noopener" title="@Dancelot_bot">
              <span>üíÉ</span>
              <span class="label">Dancelot ‚Äî —Ç–∞–Ω—Ü—É–π—Ç–µ —Ö–æ—Ä–æ—à–æ, –ø–ª–æ—Ö–æ –Ω–µ —Ç–∞–Ω—Ü—É–π—Ç–µ</span>
              <span class="arrow">‚Üó</span>
            </a>
          </div>
        `
      },
      {
        id: 'media',
        name: '–ú–µ–¥–∏–∞',
        locked: false,
        content: `
          <div class="link-list">
            <a href="https://t.me/+hF5RnN5ozz1hZWUy" class="link-item" target="_blank" rel="noopener">
              <span>${TG_SVG}</span>
              <span class="label">Collect my day ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ñ–æ—Ç–∫–∏ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –º–∏—Ä–∞</span>
              <span class="arrow">‚Üó</span>
            </a>
            <a href="https://t.me/+4o59MZz8ARk0YTVi" class="link-item" target="_blank" rel="noopener">
              <span>${TG_SVG}</span>
              <span class="label">Powered by AI ‚Äî –∫–∞–∫ –≤–∑—Ä–æ—Å–ª—ã–π –≥—É–º–∞–Ω–∏—Ç–∞—Ä–∏–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–Ω–∂–µ–Ω–µ—Ä–æ–º, –∏—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–∞–Ω–Ω–∞—è AI —Å–æ —Å–ª–æ–≤ —á–µ–ª–æ–≤–µ–∫–∞</span>
              <span class="arrow">‚Üó</span>
            </a>
            <div class="item-card">
              <span>${TG_SVG}</span>
              <div><strong>Born to be Novice</strong></div>
            </div>
            <div class="item-card">
              <span>${TG_SVG}</span>
              <div><strong>Lev Bayonet</strong></div>
            </div>
          </div>
        `
      },
      { id: 'health', name: '–ó–¥–æ—Ä–æ–≤—å–µ', locked: true, content: `<p>–†–∞–∑–¥–µ–ª –ø–æ–¥ –∑–∞–º–∫–æ–º.</p>` },
      { id: 'finance', name: '–§–∏–Ω–∞–Ω—Å—ã', locked: true, content: `<p>–†–∞–∑–¥–µ–ª –ø–æ–¥ –∑–∞–º–∫–æ–º.</p>` },
      { id: 'family', name: '–°–µ–º—å—è', locked: true, content: `<p>–†–∞–∑–¥–µ–ª –ø–æ–¥ –∑–∞–º–∫–æ–º.</p>` },
      {
        id: 'pm-ru',
        name: 'PM-RU',
        locked: false,
        content: `
          <div class="link-list">
            <a href="#" class="link-item locked-link" data-url="https://nikitamorgos.github.io/MarComTeam/" data-label="MarComTeam">
              <span class="lock">${LOCK_SVG}</span>
              <span class="label">MarComTeam</span>
              <span class="arrow">‚Üó</span>
            </a>
          </div>
        `
      }
    ];

    function renderSidebar() {
      const nav = document.getElementById('sidebar-nav');
      nav.innerHTML = sections.map(s => `
        <a class="nav-item ${s.locked ? 'locked' : ''} ${s.id === 'overview' ? 'active' : ''}" 
           href="#" data-section="${s.id}">
          ${s.locked ? `<span class="lock">${LOCK_SVG}</span>` : ''}
          ${s.name}
        </a>
      `).join('');

      nav.querySelectorAll('.nav-item').forEach(el => {
        el.addEventListener('click', (e) => {
          e.preventDefault();
          const id = el.dataset.section;
          selectSection(id);
        });
      });
    }

    function getCollectApiUrl() {
      const fromCode = (typeof COLLECT_API_URL === 'string' && COLLECT_API_URL.trim()) ? COLLECT_API_URL.trim() : '';
      return fromCode || (localStorage.getItem('avatar_collect_api_url') || '').trim() || '';
    }

    async function loadPhotoBoard() {
      const container = document.getElementById('photo-board-container');
      if (!container) return;

      let apiUrl = getCollectApiUrl();
      if (!apiUrl) {
        container.innerHTML = `
          <div class="photo-board-url-form">
            <input type="url" id="photo-api-url-input" placeholder="https://—Ç–≤–æ–π-vps:8080" value="">
            <button type="button" id="photo-api-url-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
          </div>
        `;
        document.getElementById('photo-api-url-save').onclick = function() {
          const val = (document.getElementById('photo-api-url-input').value || '').trim();
          if (val) {
            localStorage.setItem('avatar_collect_api_url', val.replace(/\/+$/, ''));
            loadPhotoBoard();
          }
        };
        return;
      }

      container.innerHTML = '<p class="photo-board-loading">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</p>';
      try {
        const base = apiUrl.replace(/\/+$/, '');
        const r = await fetch(base + '/api/collect/entries');
        if (!r.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
        const entries = await r.json();
        if (entries.length === 0) {
          container.innerHTML = '<p class="photo-board-empty">–ü–æ–∫–∞ –Ω–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ. –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ –±–æ—Ç—É @CollectMyDay_bot.</p><p class="photo-board-hint"><a href="#" id="photo-change-url">–ò–∑–º–µ–Ω–∏—Ç—å URL API</a></p>';
          document.getElementById('photo-change-url').onclick = function(e) { e.preventDefault(); localStorage.removeItem('avatar_collect_api_url'); loadPhotoBoard(); };
          return;
        }
        container.innerHTML = `
          <div class="photo-grid">
            ${entries.map(e => {
              const date = e.created_at ? new Date(e.created_at).toLocaleDateString('ru-RU', { day: 'numeric', month: 'short', year: 'numeric' }) : '';
              const caption = (e.comment || '').trim();
              return `
                <div class="photo-card">
                  <img src="${base}/api/photo/${e.id}" alt="" loading="lazy">
                  ${caption ? `<div class="caption">${escapeHtml(caption)}</div>` : ''}
                  <div class="date">${escapeHtml(date)}</div>
                </div>
              `;
            }).join('')}
          </div>
          <p class="photo-board-hint"><a href="#" id="photo-change-url">–ò–∑–º–µ–Ω–∏—Ç—å URL API</a></p>
        `;
        document.getElementById('photo-change-url').onclick = function(e) { e.preventDefault(); localStorage.removeItem('avatar_collect_api_url'); loadPhotoBoard(); };
      } catch (err) {
        container.innerHTML = '<p class="photo-board-error">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω –∏ URL –≤–µ—Ä–Ω—ã–π.</p><div class="photo-board-url-form"><input type="url" id="photo-api-url-input" placeholder="https://—Ç–≤–æ–π-vps:8080" value="${escapeHtml(apiUrl)}"><button type="button" id="photo-api-url-save">–ò–∑–º–µ–Ω–∏—Ç—å URL</button></div>';
        document.getElementById('photo-api-url-save').onclick = function() {
          const val = (document.getElementById('photo-api-url-input').value || '').trim();
          if (val) {
            localStorage.setItem('avatar_collect_api_url', val.replace(/\/+$/, ''));
            loadPhotoBoard();
          }
        };
      }
    }

    function escapeHtml(s) {
      const div = document.createElement('div');
      div.textContent = s;
      return div.innerHTML;
    }

    function selectSection(id) {
      const section = sections.find(s => s.id === id);
      if (!section) return;

      document.querySelectorAll('.nav-item').forEach(n => {
        n.classList.toggle('active', n.dataset.section === id);
      });

      const main = document.getElementById('main-content');
      const lockedClass = section.locked ? 'locked-content' : '';
      main.innerHTML = `
        <h1 class="page-title">${section.name}</h1>
        <p class="page-meta">${section.locked ? 'üîí –†–∞–∑–¥–µ–ª –ø–æ–¥ –∑–∞–º–∫–æ–º' : '–û—Ç–∫—Ä—ã—Ç'}</p>
        <div class="block ${lockedClass}">
          ${section.content}
        </div>
      `;
      bindLockedLinks();
      if (id === 'pm-ru' && sessionStorage.getItem('marcom_unlocked') === '1') {
        setTimeout(revealMarComLink, 0);
      }
    }

    let _pendingLockedUrl = null;

    function bindLockedLinks() {
      document.querySelectorAll('.locked-link').forEach(el => {
        el.onclick = (e) => {
          e.preventDefault();
          const url = el.dataset.url;
          if (!url) return;
          if (sessionStorage.getItem('marcom_unlocked') === '1') {
            revealMarComLink();
            window.open(url, '_blank');
            return;
          }
          _pendingLockedUrl = url;
          document.getElementById('auth-modal').style.display = 'flex';
          document.getElementById('auth-email').value = '';
          document.getElementById('auth-password').value = '';
          document.getElementById('auth-error').style.display = 'none';
        };
      });
    }

    document.getElementById('auth-submit').onclick = function() {
      const email = document.getElementById('auth-email').value.trim().toLowerCase();
      const password = document.getElementById('auth-password').value.trim();
      const errEl = document.getElementById('auth-error');
      const expectedEmail = MARCOM_CREDENTIALS.email.trim().toLowerCase();
      const expectedPass = MARCOM_CREDENTIALS.password;
      if (email === expectedEmail && password === expectedPass) {
        sessionStorage.setItem('marcom_unlocked', '1');
        document.getElementById('auth-modal').style.display = 'none';
        if (_pendingLockedUrl) {
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –≤ PM-RU –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º
          revealMarComLink();
          window.open(_pendingLockedUrl, '_blank');
          _pendingLockedUrl = null;
        }
      } else {
        errEl.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
        errEl.style.display = 'block';
      }
    };

    function revealMarComLink() {
      const locked = document.querySelector('.locked-link[data-url*="MarComTeam"]');
      if (locked && locked.dataset.url) {
        const url = locked.dataset.url;
        const label = locked.dataset.label || 'MarComTeam';
        const wrap = document.createElement('a');
        wrap.href = url;
        wrap.target = '_blank';
        wrap.rel = 'noopener';
        wrap.className = 'link-item';
        wrap.innerHTML = `<span class="label">${label}</span><span class="arrow">‚Üó</span>`;
        locked.parentNode.replaceChild(wrap, locked);
      }
    }

    document.getElementById('auth-modal').onclick = function(e) {
      if (e.target === this) {
        this.style.display = 'none';
        _pendingLockedUrl = null;
      }
    };

    renderSidebar();
    selectSection('overview');
  </script>
</body>
</html>
